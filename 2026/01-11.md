# 2026-01-11
## 今日学んだこと（暗号・認証・PKI・ネットワークセキュリティ）

---

## 1) 暗号化とは（暗号化 / 復号化）
- **暗号化**：平文（読めるデータ）を、第三者に読めない形（暗号文）へ変換すること
- **復号化**：暗号文を元の平文へ戻すこと
- 目的：**機密性（盗聴防止）**を高める

---

## 2) 共通鍵暗号方式（対称鍵暗号）
- 暗号化と復号化に **同じ鍵（共通鍵）** を使う
- 特徴
  - ✅ 速い（大量データの暗号化に向く）
  - ❌ 鍵を安全に共有するのが難しい（鍵配送問題）

---

## 3) 公開鍵暗号方式（非対称鍵暗号）
- **公開鍵** と **秘密鍵** のペアを使う暗号方式
- 暗号化と復号化で使う鍵が違う

### 仕組み（基本）
- 送信者：受信者の **公開鍵** で暗号化
- 受信者：自分の **秘密鍵** で復号化

### 特徴
- ✅ 鍵を事前に共有しなくても通信できる
- ❌ 共通鍵暗号より遅い（大量データには不向き）
  - 実運用では「公開鍵暗号で共通鍵を安全に交換 → 本体データは共通鍵暗号」で行う

---

## 4) RSA / 楕円曲線暗号（ECC）
### RSA暗号（代表的な公開鍵暗号）
- 大きな整数の素因数分解が困難であることを利用する方式
- 公開鍵暗号として広く利用されている

### 楕円曲線暗号（ECC）
- 楕円曲線上の計算の困難さを利用する公開鍵暗号
- RSAより **短い鍵長で同等の安全性**を得やすい（軽量化に向く）

---

## 5) ハッシュ関数とは
- データを固定長の値（ハッシュ値）に変換するアルゴリズム
- 特徴
  - 入力がどんな長さでも **出力は一定長**
  - **ハッシュ値から元の入力を復元できない（原則）**
  - 少しでも入力が変わるとハッシュ値が大きく変わる
- 用途：改ざん検知、パスワード保存（平文保存しない）など

---

## 6) 認証技術（本人確認の方法）
### 多要素認証（MFA）
- 認証要素を2つ以上組み合わせる
  - **知識**：パスワード、暗証番号
  - **所持**：スマホ、ICカード、トークン
  - **生体**：指紋、虹彩、顔など
- 1つが漏れても突破されにくい

### ワンタイムパスワード（OTP）
- 専用端末やアプリで **一定時間だけ有効なパスワード**を生成して使う
- パスワードの使い回し・盗聴に強い

### CAPTCHA / reCAPTCHA
- 画像や文字などを使って **ボット（自動化）を検出**する仕組み

### 生体認証（バイオメトリクス認証）
- 指紋・虹彩・顔認証などで本人確認する方法
- 「忘れない」「盗まれにくい」一方、漏えい時に変更できない点に注意

### コールバック認証
- 登録済みの電話番号へ **折り返し（コールバック）**して本人確認する方法

---

## 7) ディジタル署名とは（改ざん防止・なりすまし防止）
- **通信内容の改ざんを防ぐ仕組み**
- 一般に次の性質を提供する
  - **改ざん検知（完全性）**
  - **送信者証明（認証）**
  - **否認防止（送っていないと言いにくい）**

### 仕組み（概要）
- 送信者：メッセージのハッシュ値を作り、**秘密鍵で署名**する
- 受信者：送信者の**公開鍵で署名を検証**し、改ざんがないか確認する

---

## 8) ディジタル証明書とは（相手を保証する仕組み）
- **通信している相手が本物か**を保証する仕組み
- 「この公開鍵は、この組織/人のものです」と第三者（認証局）が証明する

### 証明書発行（イメージ）
- 申請者 → 認証局（CA）へ申請
- 認証局が本人確認し、公開鍵を含む証明書を発行
- 利用者は証明書を検証して相手の正当性を確認できる

---

## 9) 公開鍵基盤（PKI）とは / 仕組み
- **PKI（Public Key Infrastructure）**：公開鍵暗号と証明書を安全に運用するための仕組み（基盤）
- 主役
  - **認証局（CA）**：証明書を発行する
  - **証明書**：公開鍵と身元情報のセット
  - **利用者**：証明書を検証して安全に通信する
- 目的：公開鍵暗号を使うときの「この公開鍵って本物？」問題を解決する

---

## 10) ネットワークセキュリティ（仕組みと用語）
### ファイアウォール
- LANの内外を区切り、**悪意のある通信を遮断**して守る仕組み
- 主にルールに基づいて通信を許可/拒否する

### パケットフィルタリング
- あらかじめルールを指定し、条件に合うパケットのみ通すことでLANを守る
- 条件例：IP、ポート番号、プロトコル など

### DMZ（非武装地帯）
- 外部公開が必要なサーバ（Webなど）を置く中間領域
- **外部からも内部からもアクセスしやすい**が、内部LANを直接さらさないための構成
- 侵入されても被害が内部へ広がりにくい設計

### プロキシサーバ
- インターネット接続の**代理**をするサーバ
- 利点
  - アクセス先を直接見せにくくして **秘匿性向上**
  - ログ収集による監視
  - キャッシュによる高速化
  - 不正サイトのブロックなど制御がしやすい

### VPN
- インターネット上に **仮想的な専用通路**を作って安全な通信を行う技術
- 盗聴や改ざんに強くする（暗号化・認証を組み合わせる）

### IPマスカレード（NAPT）
- **IPアドレス＋ポート番号**を変換して、複数端末が1つのグローバルIPを共有して外へ出る仕組み

---

## 11) セキュアプロトコル
- **HTTPS**：HTTP通信の内容を暗号化する仕組み（TLS）
- **IPsec**：IPレベルで暗号化や認証を行い、安全な通信を実現する技術

---

## 12) OAuth（オーオース）とは
- アプリケーション間で認可を行う仕組み
- ユーザーのパスワードを直接渡さずに、**アクセストークン**で権限を委譲できる
- 流れ（概要）
  1. 認可リクエスト
  2. 認可（ユーザー同意）
  3. トークン発行
  4. アクセストークンでAPI利用

---

## 今日のまとめ
- 暗号化は機密性を守る。共通鍵は速いが鍵共有が課題、公開鍵は鍵共有に強いが遅い  
- RSAや楕円曲線暗号は代表的な公開鍵暗号  
- ハッシュ関数は固定長出力で、元に戻せない性質を利用して改ざん検知などに使う  
- ディジタル署名は改ざん検知・送信者証明・否認防止に役立つ  
- 証明書とPKIは「公開鍵が本物か」を保証して安全な通信を成立させる  
- ファイアウォール/パケットフィルタリング/DMZ/プロキシ/VPNなどでネットワークを守る  
- HTTPSやIPsecは安全な通信を実現する代表的プロトコル  
- OAuthはアクセストークンでアプリ間の認可を行う仕組み  
